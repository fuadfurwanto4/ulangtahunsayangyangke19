<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChelseaOS v20.07 ğŸ€</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- FIREBASE SDK & LOGIC -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // ================================================================
        // âš ï¸ AREA KONFIGURASI FIREBASE (WAJIB DIISI)
        // ================================================================
        const firebaseConfig = {
  apiKey: "AIzaSyAuFw8F8tMftGfQcBa1Vwg344Mfz1PsRrA",
  authDomain: "chelseaos.firebaseapp.com",
  projectId: "chelseaos",
  storageBucket: "chelseaos.firebasestorage.app",
  messagingSenderId: "644334407232",
  appId: "1:644334407232:web:43de410cc07a3094ead9a5"
};
        // ================================================================

        let db;
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            console.log("âœ… Database Firebase Terhubung");
        } catch (e) {
            console.warn("âš ï¸ Firebase Config belum diisi dengan benar.");
        }

        // Fungsi Global untuk Kirim Pesan
        window.kirimPesanKeInbox = async function() {
            const pesanInput = document.getElementById('msg-input');
            const btn = document.getElementById('btn-kirim');
            const pesan = pesanInput.value;
            
            if(!pesan) { 
                alert("Isi pesannya dulu dong sayang! ğŸ˜œ"); 
                return; 
            }
            
            btn.innerText = "Mengirim...";
            btn.disabled = true;
            btn.classList.add('opacity-50');

            try {
                if(db) {
                    await addDoc(collection(db, "inbox_chelsea"), {
                        pesan: pesan,
                        waktu: new Date().toLocaleString(),
                        tipe: "Dari ChelseaOS"
                    });
                    alert("Pesan berhasil dikirim ke Inbox Mamas! â¤ï¸\nMas Fuad bisa baca di inbox.html");
                    pesanInput.value = "";
                    closeWindow('win-msg-mamas'); // Tutup jendela setelah kirim
                } else {
                    alert("Simulasi Berhasil! (Pesan tidak terkirim karena Database belum disetting)");
                    console.log("Pesan simulasi:", pesan);
                }
            } catch (e) {
                alert("Gagal kirim. Cek koneksi internet atau config Firebase.");
                console.error("Firebase Error:", e);
            }
            
            btn.innerText = "KIRIM KE AWAN â˜ï¸";
            btn.disabled = false;
            btn.classList.remove('opacity-50');
        }
    </script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'win-gray': '#c0c0c0',
                        'win-blue': '#000080',
                        'chelsea-pink': '#ffc0cb',
                        'deep-purple': '#4a0e4e',
                    },
                    fontFamily: {
                        'pixel': ['"VT323"', 'monospace'],
                        'body': ['"Quicksand"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <style>
        /* Retro Windows Styles */
        .win-box { 
            background-color: #c0c0c0; 
            border-top: 2px solid #fff; 
            border-left: 2px solid #fff; 
            border-right: 2px solid #808080; 
            border-bottom: 2px solid #808080; 
            box-shadow: 1px 1px 0 #000; 
        }
        .win-box-inset { 
            background-color: #fff; 
            border-top: 2px solid #808080; 
            border-left: 2px solid #808080; 
            border-right: 2px solid #fff; 
            border-bottom: 2px solid #fff; 
        }
        .win-header { 
            background: linear-gradient(90deg, #ff1493, #ff69b4); 
            color: white; 
            padding: 3px 6px; 
            font-family: 'Quicksand', sans-serif; 
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            cursor: move; /* Menandakan bisa digeser */
        }
        .win-btn { 
            background: #c0c0c0; 
            border-top: 1px solid #fff; 
            border-left: 1px solid #fff; 
            border-right: 1px solid #000; 
            border-bottom: 1px solid #000; 
            min-width: 24px; 
            text-align: center; 
            cursor: pointer; 
            font-size: 14px; 
            line-height: 16px; 
            font-weight: bold;
            color: black;
        }
        .win-btn:active { 
            border-top: 1px solid #000; 
            border-left: 1px solid #000; 
            border-right: 1px solid #fff; 
            border-bottom: 1px solid #fff; 
            transform: translate(1px, 1px);
        }
        
        /* Desktop Icons */
        .desktop-icon { 
            width: 85px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            text-align: center; 
            cursor: pointer; 
            padding: 8px 4px; 
            border: 1px solid transparent; 
            margin-bottom: 8px; 
            transition: all 0.1s;
        }
        .desktop-icon:hover { 
            border: 1px dotted rgba(255, 255, 255, 0.8); 
            background: rgba(255, 255, 255, 0.15); 
        }
        .desktop-icon img { 
            width: 48px; 
            height: 48px; 
            margin-bottom: 4px; 
            filter: drop-shadow(2px 2px 0 rgba(0,0,0,0.5)); 
        }
        .icon-label { 
            color: white; 
            font-family: 'Quicksand', sans-serif; 
            font-size: 11px; 
            text-shadow: 1px 1px 2px black; 
            background: rgba(0,0,0,0.3); 
            padding: 2px 4px; 
            border-radius: 4px; 
            line-height: 1.2; 
        }

        /* WINDOW LOGIC - HARD FIX (Supaya tidak muncul otomatis) */
        .window { 
            position: absolute; 
            display: none !important; /* KUNCI MATI DEFAULT */
            flex-direction: column; 
            resize: both; 
            overflow: hidden; 
            min-width: 250px; 
            min-height: 150px; 
            animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        /* Class ini akan ditambahkan via JS untuk menampilkan window */
        /* Kita pakai ID spesifik di JS untuk override display:none !important */
        
        @keyframes popUp { 
            from { transform: scale(0.8); opacity: 0; } 
            to { transform: scale(1); opacity: 1; } 
        }

        /* Boot & System UI */
        #boot-screen { font-family: 'VT323', monospace; background: black; color: #00ff00; z-index: 9999; }
        .typing-cursor::after { content: 'â–ˆ'; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        
        #taskbar { background: #c0c0c0; border-top: 2px solid #fff; box-shadow: 0 -2px 2px rgba(0,0,0,0.2); }
        .scanlines { 
            background: linear-gradient( to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1) ); 
            background-size: 100% 4px; 
            position: fixed; inset: 0; pointer-events: none; z-index: 9998; opacity: 0.2; 
        }
        
        /* Candle Game */
        .cake-container { position: relative; width: 250px; height: 150px; background: #ffc0cb; border-radius: 10px 10px 0 0; display: flex; justify-content: space-around; align-items: flex-end; padding-bottom: 20px; border-bottom: 10px solid #d45d79; margin: 0 auto; }
        .candle { width: 15px; height: 60px; background: repeating-linear-gradient(45deg, #fff, #fff 5px, #ff69b4 5px, #ff69b4 10px); position: relative; border-radius: 3px; }
        .flame { width: 20px; height: 30px; background: radial-gradient(ellipse at bottom, #ffee00, #ff9900, #ff0000); border-radius: 50% 50% 20% 20%; position: absolute; top: -35px; left: 50%; transform: translateX(-50%); animation: flicker 0.5s infinite alternate; cursor: pointer; box-shadow: 0 0 10px #ff9900; transition: opacity 0.3s; }
        .flame.off { opacity: 0; animation: none; }
        .smoke { position: absolute; top: -40px; left: 50%; width: 10px; height: 20px; background: rgba(200,200,200,0.5); border-radius: 50%; filter: blur(3px); opacity: 0; transform: translateX(-50%); }
        .smoke.active { animation: smokeRise 1s forwards; }
        @keyframes flicker { 0% { transform: translateX(-50%) scale(1); } 100% { transform: translateX(-50%) scale(1.1); } }
        @keyframes smokeRise { 0% { opacity: 0.8; top: -35px; } 100% { opacity: 0; top: -80px; transform: translateX(-50%) scale(2); } }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        
        @media (max-width: 640px) { .window { width: 92% !important; left: 4% !important; top: 5% !important; max-height: 85vh; } }
    </style>
</head>
<body class="overflow-hidden bg-[#008080] h-screen select-none font-body">
    
    <!-- Audio Background -->
    <audio id="bg-music" loop>
        <source src="https://audio.jukehost.co.uk/2DDmwW4ePTZlx2gIP4DFnq1Gs7SCl1Bw" type="audio/mpeg">
    </audio>

    <div class="scanlines"></div>

    <!-- 1. BOOT SCREEN -->
    <div id="boot-screen" class="fixed inset-0 flex flex-col justify-center items-center p-8 text-xl leading-relaxed cursor-pointer" onclick="bootSystem()">
        <div class="max-w-2xl w-full">
            <p class="mb-2">BIOS Date 01/24/26 11:04:00 Ver: 20.07</p>
            <p class="mb-2">CPU: Love Core i9-9999K @ 5.0GHz</p>
            <p class="mb-4">Memory Test: 1048576K OK</p>
            <div id="boot-text" class="text-white space-y-1 font-pixel text-lg md:text-xl"></div>
            <div id="click-prompt" class="mt-8 text-center hidden animate-pulse text-yellow-400 font-pixel text-2xl">
                [ KLIK LAYAR UNTUK MASUK KE SYSTEM ]
            </div>
        </div>
    </div>

    <!-- 2. LOGIN SCREEN -->
    <div id="login-screen" class="fixed inset-0 bg-[#000080] hidden z-[60] flex flex-col justify-center items-center">
        <div class="win-box p-1 bg-[#c0c0c0] rounded-sm shadow-2xl">
            <div class="win-header mb-4 bg-gradient-to-r from-blue-800 to-blue-600">
                <span>Welcome to ChelseaOS</span>
            </div>
            <div class="flex flex-col md:flex-row gap-6 p-8 items-center">
                <div class="w-32 h-32 bg-white border-2 border-gray-500 p-1 shadow-inner">
                    <!-- GANTI FOTO PROFIL DI SINI -->
                    <img src="fotoprofil.jpg" class="w-full h-full object-cover">
                </div>
                <div class="flex flex-col gap-3">
                    <h2 class="text-2xl font-bold text-gray-800">Chelsea R.C.</h2>
                    <p class="text-sm text-gray-600">Masukkan password untuk membuka hati:</p>
                    <div class="flex flex-col gap-2">
                        <input type="password" id="login-pass" placeholder="Ketik disini..." class="win-box-inset px-3 py-2 w-64 bg-white focus:outline-none font-bold text-lg">
                        <button onclick="checkLogin()" class="win-btn px-6 py-2 font-bold active:translate-y-px bg-green-200 self-start border-2 hover:bg-green-300">â¡ï¸ MASUK</button>
                    </div>
                    <p id="login-error" class="text-white bg-red-600 px-2 py-1 text-xs font-bold hidden border border-white mt-2">
                        â›” Password Salah! Coba: "cece cantik"
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. DESKTOP ENVIRONMENT -->
    <!-- GANTI WALLPAPER DI SINI (Dalam URL) -->
    <main id="desktop" 
          class="relative w-full h-full hidden bg-cover bg-center"
          style="background-image: url('Walpaper.png');">
        
        <!-- Desktop Icons (2 Columns) -->
        <div class="absolute top-4 left-4 grid grid-cols-2 gap-x-6 gap-y-4 w-[200px]">
            <div class="desktop-icon" onclick="openWindow('win-letter')"><img src="https://cdn-icons-png.flaticon.com/512/3033/3033143.png"><span class="icon-label">SuratCinta.txt</span></div>
            <div class="desktop-icon" onclick="openWindow('win-gallery')"><img src="https://cdn-icons-png.flaticon.com/512/3342/3342137.png"><span class="icon-label">MasaKecil</span></div>
            <div class="desktop-icon" onclick="openWindow('win-music')"><img src="https://cdn-icons-png.flaticon.com/512/3039/3039437.png"><span class="icon-label">Musik</span></div>
            <div class="desktop-icon" onclick="openWindow('win-cake')"><img src="https://cdn-icons-png.flaticon.com/512/3362/3362720.png"><span class="icon-label">KueUltah</span></div>
            <div class="desktop-icon" onclick="openWindow('win-diary')"><img src="https://cdn-icons-png.flaticon.com/512/2904/2904859.png"><span class="icon-label">MyDiary</span></div>
            <div class="desktop-icon" onclick="openWindow('win-msg-mamas')"><img src="https://cdn-icons-png.flaticon.com/512/2165/2165061.png"><span class="icon-label">ToMamas</span></div>
            <div class="desktop-icon" onclick="openWindow('win-game')"><img src="https://cdn-icons-png.flaticon.com/512/808/808476.png"><span class="icon-label">MagicCandleGame</span></div>
            <div class="desktop-icon" onclick="openWindow('win-video')"><img src="https://cdn-icons-png.flaticon.com/512/2859/2859706.png"><span class="icon-label">Cinema</span></div>
            <div class="desktop-icon" onclick="openWindow('win-calc')"><img src="https://cdn-icons-png.flaticon.com/512/564/564429.png"><span class="icon-label">HitungCinta</span></div>
            <div class="desktop-icon" onclick="openWindow('win-error')"><img src="https://cdn-icons-png.flaticon.com/512/3342/3342176.png"><span class="icon-label">Mantan</span></div>
        </div>

        <!-- === WINDOWS APP (SEMUA DI-SET display: none !important) === -->

        <!-- 1. Window Surat (FULL TEXT) -->
        <div id="win-letter" class="window win-box w-[600px] h-[500px] top-10 left-[240px] z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-letter')">
                <span>ğŸ“ SuratCinta.txt - Notepad</span>
                <button class="win-btn bg-red-500 text-white border-red-700" onclick="closeWindow('win-letter')">X</button>
            </div>
            <div class="flex-1 win-box-inset m-1 p-6 overflow-y-auto font-pixel text-xl bg-white leading-relaxed text-gray-800">
                <p>Halo sayang!!!!! ğŸ˜‡ğŸ˜‡</p>
                <p>bagaimana bisa masuk kan??????? ğŸ˜ğŸ˜ğŸ˜</p>
                <br>
                <p>alhamdulillah ..</p>
                <p>Lihat lihat!!!!! ada yang berumur 19 tahun sekarang !!!!ğŸ¤©ğŸ¤©ğŸ¤©</p>
                <p>Pertama-tama mas cuma mau ucapin selamat ulang tahun yang ke-19 tahun ya sayang ğŸ‰ğŸ‚ğŸ€ğŸ’—ğŸ¥³</p>
                <p>semoga Panjang umur, di sehatkan badannya, di mudahkan segala urusannya, dan apa apa yang di cita-citakan tercapai semua ya cantik .. ğŸ¤²ğŸ¤² aamiin ...</p>
                <br>
                <p class="text-2xl text-chelsea-pink font-bold text-center border-y-2 border-pink-200 py-2 my-2">ğ»ğ’¶ğ“…ğ“…ğ“ ğ’·ğ’¾ğ“‡ğ“‰ğ’½ğ’¹ğ’¶ğ“</p>
                <br>
                <p>Di tanggal 23 Februari 2007 lahir lah seorang bayi perempuan bernama CHELSEA REGITA CAHYANI ğŸ‘¶ğŸ»</p>
                <p>Bayi ini sangat sangat kuat! yang dimana dari lahir saja sudah di bawa perjalanan jauh sebelum lahir. Bayangkan dari Depok ke Sukabumi naik motor untuk melahirkan wanita yang sangat kuat hingga sekarang!!! WOWWW ğŸ¤¯ğŸ¤¯</p>
                <p>Dan lihat! sekarang anak ini menjadi tumbuh menjadi anak dewasa yang kuat, yang rajin, yang sholehah, yang cantik ..</p>
                <p>ğŸ€ğŸ«¶ğŸ»ğŸ’ŒğŸ’“</p>
                <br>
                <p>Betulan deh .. betapa senangnya mamas bisa bertemu sayang mamas, bisa temani sayang sampai ulang tahun ini!!</p>
                <p>pokoknya sayang harus sehat jasmani dan rohaninya, sayang harus menjadi anak yang lebih kuat lagi ya, menjadi anak yang lebih dewasa lagi, lebih berbakti lagi kepada orang tua sayang .. aamiin..</p>
                <br>
                <p>intiya mamas hanya bisa mendoakan dan mensuport sayang, lakuin apa yang sayang ingin lakuin kedepannya ya .. selama itu baik untuk diri sayang dan tidak merugikan orang lain .. lakuin ya sayang, tidak boleh takut, tidak boleh ragu, insyallah mamas pasti akan selalu di sini menemani sayang mamas!!1</p>
                <br>
                <p>sayanggg ... </p>
                <p>maaf yaa mamas belum bisa kasih apaa apaa, mamas hanya bisa memberikan doa yang terbaik untuk sayang .. terimakasih juga sudah bertahan hingga sekarang ya cantik. sayang hebat, sayang luar biasa, sayang tangguh. Mamas salut dengan sayang!!!!</p>
                <br>
                <p class="font-bold text-deep-purple">I LOVEE YOUUU SO MUCHHH SAYANG MAMASSSSS .. sehat sehat terus ya cantik ğŸ«¶ğŸ»ğŸ¥¹â¤ï¸â€ğŸ©¹</p>
            </div>
        </div>

        <!-- 2. Window Pesan ke Mamas (FIREBASE) -->
        <div id="win-msg-mamas" class="window win-box w-[400px] h-[350px] top-32 left-[280px] z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-msg-mamas')">
                <span>ğŸ’Œ Pesan Untuk Mamas</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-msg-mamas')">X</button>
            </div>
            <div class="flex-1 p-4 bg-[#f0f0f0] flex flex-col">
                <p class="text-sm mb-2 font-bold text-gray-700">Kirim pesan ke Inbox Database:</p>
                <textarea id="msg-input" class="flex-1 w-full p-2 border-2 border-gray-400 font-body text-base resize-none focus:outline-none focus:border-blue-500" placeholder="Mas Fuad, aku mau bilang..."></textarea>
                <div class="mt-4">
                    <button id="btn-kirim" onclick="kirimPesanKeInbox()" class="win-btn px-4 py-2 bg-green-200 font-bold w-full border-2 hover:bg-green-300 shadow-md">
                        <i class="fas fa-paper-plane mr-2"></i>KIRIM KE AWAN â˜ï¸
                    </button>
                </div>
            </div>
        </div>

        <!-- 3. Window Diary (Local Storage) -->
        <div id="win-diary" class="window win-box w-[400px] h-[400px] top-20 left-[250px] z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-diary')">
                <span>ğŸ“” Diary Rahasia</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-diary')">X</button>
            </div>
            <div class="flex-1 p-4 bg-[#fff9c4] flex flex-col">
                <p class="text-sm font-bold text-gray-700 mb-2">Harapan untuk Diri Sendiri di umur 19 tahun:</p>
                <textarea id="diary-input" class="flex-1 w-full p-3 border-2 border-yellow-500 font-handwriting text-lg leading-relaxed focus:outline-none bg-yellow-50" placeholder="Dear diary..."></textarea>
                <div class="mt-3 flex justify-between items-center">
                    <button onclick="saveDiary()" class="win-btn px-4 py-1 bg-blue-200 font-bold hover:bg-blue-300">ğŸ’¾ SIMPAN</button>
                    <span class="text-xs italic text-gray-500">*Hanya tersimpan di sini mamas tidak bisa lihat</span>
                </div>
            </div>
        </div>

        <!-- 4. Window Musik (AUTO OPEN VIA JS) -->
        <div id="win-music" class="window win-box w-[300px] top-[40%] right-[5%] flex flex-col z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-music')">
                <span>ğŸµ WinAmp</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-music')">X</button>
            </div>
            <div class="bg-black p-4 m-1 win-box-inset text-green-400 font-pixel text-xl">
                <marquee scrollamount="5">NOW PLAYING: Happy Birthday to Chelsea - Special Mix.mp3 ... I Love You ...</marquee>
                <div class="flex justify-center gap-4 mt-4">
                    <button onclick="document.getElementById('bg-music').play()" class="win-btn px-4 font-bold text-black bg-gray-300 hover:bg-white">â–¶ PLAY</button>
                    <button onclick="document.getElementById('bg-music').pause()" class="win-btn px-4 font-bold text-black bg-gray-300 hover:bg-white">â¸ PAUSE</button>
                </div>
                <div class="mt-2 text-xs text-gray-500 text-center">128kbps stereo</div>
            </div>
        </div>

        <!-- 5. Window Kue (AUTO OPEN VIA JS) -->
        <div id="win-cake" class="window win-box w-[350px] top-[15%] left-[30%] flex flex-col items-center z-40" style="display: none !important;">
            <div class="win-header w-full" onmousedown="dragStart(event, 'win-cake')">
                <span>ğŸ‚ Make a Wish!</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-cake')">X</button>
            </div>
            <div class="p-8 bg-pink-50 w-full text-center m-1 win-box-inset relative overflow-hidden">
                <h3 class="font-bold text-deep-purple mb-6 text-xl">Tiup Lilinnya Sayang!</h3>
                <div class="cursor-pointer transition transform hover:scale-110 active:scale-95 inline-block" onclick="blowCandleGeneric()">
                    <div class="text-8xl animate-bounce">ğŸ‚</div>
                </div>
                <p class="text-xs text-gray-400 mt-2">(Klik kuenya)</p>
                <p id="wish-text" class="hidden mt-6 text-lg font-bold text-pink-600 animate-pulse">"Semoga panjang umur & sehat selalu!" ğŸ‰</p>
            </div>
        </div>

        <!-- 6. Window Game Lilin (HIDDEN) -->
        <div id="win-game" class="window win-box w-[450px] h-[450px] top-10 right-10 z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-game')">
                <span>ğŸ•¯ï¸ Magic Candle Game</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-game')">X</button>
            </div>
            <div class="flex-1 bg-black relative flex flex-col items-center justify-center p-4" id="game-area">
                <div class="absolute top-2 right-2">
                    <button onclick="enableMic()" class="bg-gray-800 text-white text-xs px-3 py-1 rounded border border-gray-600 hover:bg-gray-700">ğŸ¤ Aktifkan Mic</button>
                </div>
                <div class="cake-container mt-12" id="candle-container"></div>
                <div class="mt-8 text-white text-center font-pixel text-xl z-10">
                    <p id="game-instruction">Tiup microphone atau Klik api!</p>
                    <p class="text-xs text-gray-500 mt-1">(Awas lilinnya jail ğŸ‘»)</p>
                </div>
                <button id="reset-candle-btn" onclick="resetCandles()" class="hidden mt-6 bg-yellow-400 text-black px-6 py-2 font-bold rounded-full shadow-lg hover:scale-105 transition">Main Lagi? ğŸ‚</button>
            </div>
        </div>
        
        <!-- 7. Window Video (HIDDEN) -->
        <div id="win-video" class="window win-box w-[500px] top-[15%] left-[20%] z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-video')">
                <span>ğŸ¬ Cinema - Video Kita</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-video')">X</button>
            </div>
            <div class="bg-black p-2 flex justify-center items-center h-full">
    <iframe 
        class="w-full h-[350px]" 
        src="https://drive.google.com/file/d/1cTnnmUzD8wvBQimhuYyh3MzFyXzZSUu8/preview" 
        allow="autoplay" 
        allowfullscreen>
    </iframe>
</div>
        </div>
        
        <!-- 8. Window Gallery (HIDDEN - 8 SLOT FOTO) -->
        <div id="win-gallery" class="window win-box w-[600px] h-[500px] top-10 left-20 z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-gallery')">
                <span>ğŸ“¸ Folder: Memories</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-gallery')">X</button>
            </div>
            <div id="gallery-content" class="flex-1 bg-white m-1 p-4 grid grid-cols-2 md:grid-cols-3 gap-4 overflow-y-auto">
                <!-- Foto akan di-generate oleh Javascript di bawah -->
            </div>
            <div class="bg-[#c0c0c0] p-1 text-xs border-t border-gray-400">8 items selected</div>
        </div>
        
        <!-- 9. Window Image Viewer (Popup) -->
        <div id="win-image-viewer" class="window win-box w-[500px] top-5 left-5 z-[70]" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-image-viewer')">
                <span>ğŸ–¼ï¸ Image Viewer</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-image-viewer')">X</button>
            </div>
            <div class="flex-1 bg-white m-1 p-2 flex flex-col items-center">
                <div class="w-full h-[300px] bg-black flex items-center justify-center mb-4 border border-gray-400">
                    <img id="viewer-img" class="max-w-full max-h-full object-contain">
                </div>
                <div class="w-full bg-pink-50 p-4 rounded border border-pink-200">
                    <p class="font-bold text-deep-purple mb-1 text-xs uppercase tracking-wide">Mas Fuad says:</p>
                    <p id="viewer-caption" class="font-body text-gray-700 italic text-base leading-relaxed"></p>
                </div>
            </div>
        </div>
        
        <!-- 10. Kalkulator (HIDDEN) -->
        <div id="win-calc" class="window win-box w-[300px] top-[30%] right-[30%] z-40" style="display: none !important;">
            <div class="win-header" onmousedown="dragStart(event, 'win-calc')">
                <span>ğŸ§® Love Calculator</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-calc')">X</button>
            </div>
            <div class="p-6 bg-white m-1 win-box-inset font-pixel text-xl">
                <p>Chelsea's Age:</p>
                <p id="age-calc" class="text-blue-600 font-bold mb-4 text-2xl">...</p>
                <hr class="border-gray-300 my-2 border-dashed">
                <p>Days since born:</p>
                <p id="days-calc" class="text-pink-600 font-bold text-2xl">...</p>
            </div>
        </div>

        <!-- 11. Error Mantan (HIDDEN) -->
        <div id="win-error" class="window win-box w-[350px] top-[40%] left-[40%] z-[999]" style="display: none !important;">
            <div class="win-header bg-red-700" onmousedown="dragStart(event, 'win-error')">
                <span>âš ï¸ SYSTEM ERROR</span>
                <button class="win-btn bg-red-500 text-white" onclick="closeWindow('win-error')">X</button>
            </div>
            <div class="p-6 bg-[#c0c0c0] flex items-center gap-4">
                <img src="https://cdn-icons-png.flaticon.com/512/3342/3342176.png" class="w-16 h-16">
                <div>
                    <p class="font-bold text-lg mb-1">Access Denied!</p>
                    <p class="text-sm text-gray-700">Mas Fuad tidak mengizinkan kenangan buruk disimpan di sini. ğŸ˜œ</p>
                </div>
            </div>
            <div class="p-3 flex justify-center bg-[#c0c0c0]">
                <button class="win-btn px-6 py-1 font-bold border-2 border-black" onclick="closeWindow('win-error')">OK</button>
            </div>
        </div>

        <!-- TASKBAR -->
        <div id="taskbar" class="absolute bottom-0 w-full h-12 flex items-center px-2 gap-2 z-[100]">
            <button class="win-btn px-4 py-1 flex items-center gap-2 font-bold text-xl hover:bg-gray-300 active:bg-gray-400" onclick="alert('Menu Start Coming Soon!')">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Windows_logo_and_wordmark_-_1995-2001.svg/1200px-Windows_logo_and_wordmark_-_1995-2001.svg.png" class="h-6"> 
                Start
            </button>
            <div class="border-l-2 border-gray-500 h-8 mx-2"></div>
            <div class="flex-1"></div> <!-- Spacer -->
            <div class="win-box-inset px-4 py-1 bg-[#c0c0c0] text-sm font-pixel flex items-center gap-2">
                <i class="fas fa-volume-up"></i>
                <span id="clock">12:00 PM</span>
            </div>
        </div>
    </main>

    <!-- JS Logic -->
    <script>
        // BOOT SEQUENCE
        const bootText = ["Initializing Heart...", "Loading Memories...", "Checking Cuteness...", "Starting ChelseaOS...", "Ready."];
        let lineIdx = 0;
        window.onload = () => {
            const type = () => {
                if (lineIdx < bootText.length) {
                    const p = document.createElement('p'); p.textContent = "> " + bootText[lineIdx++]; p.className = "typing-cursor mb-1 text-green-400 font-pixel";
                    document.getElementById('boot-text').appendChild(p);
                    setTimeout(type, 600);
                } else document.getElementById('click-prompt').classList.remove('hidden');
            }; type();

            // GENERATE 8 FOTO DI GALERI (GANTI LINK FOTONYA DI SINI)
            const photos = [
                {src:'FotoBayipertama.jpg', msg:'Sumpah ini foto lucu banget sayang, tau nggak? mamas suka banget lihat foto ini tau .. ğŸ¥°', name:'Foto Bayik pertama'},
                {src:'fotobayikedua.jpg', msg:'kalo ini foto yang gemas, kata sayang mah masih kecil sudah bergaya â¤ï¸', name:'Foto debay lagi'},
                {src:'fotobalitapertama.jpg', msg:'ini foto sayang balita kan? semoga aja benar hehe. tapi asik banget sayang jalan jalanğŸ˜', name:'foto balita pertama'},
                {src:'fotobalitakedua.jpg', msg:'ini mungkin foto jalan jalan lagi, tapi sambil nyedotin mie gemezzğŸ¤£', name:'Foto balita kedua'},
                {src:'fotoanakanakkedua.jpg', msg:'nah ini sudah anak anak nih, centil dan manisnya sudah kelhatan, beuh cantik sangat ini ğŸ¥°', name:'Foto anak anak pertama'},
                {src:'fotoanakanakpertama.jpg', msg:'mau ngaji bu haji?ğŸ¤­ tapi masyaallah sayang mamas, cantik banget, terus jadi anak yang sholehah ya cantik', name:'foto anak anak kedua'},
                {src:'fotobersamanenek.jpg', msg:'nah ini foto sayang meluk nenek hehe sayang harus terus doain nenek ya sayang .. jangan pernah putus putus untuk doain nenek, nenek bangga punya sayang', name:'foto meluk nenek'},
                {src:'fotosamamamas.jpg', msg:'nah ini mamas sempilin satu foto bareng mamas, supaya inget terus sama mamas hehe, minimal kalau buka link ini lagiğŸ˜', name:'Foto sama mamas'}
            ];
            
            document.getElementById('gallery-content').innerHTML = photos.map(p => 
                `<div class="win-box p-2 bg-gray-100 text-center cursor-pointer hover:bg-blue-100 transition group" onclick="openPhoto('${p.src}', '${p.msg}')">
                    <div class="overflow-hidden border-2 border-gray-400 h-32 w-full">
                        <img src="${p.src}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                    </div>
                    <p class="font-pixel mt-2 text-sm truncate">${p.name}</p>
                </div>`
            ).join('');

            // INIT CANDLES
            document.getElementById('candle-container').innerHTML = Array(5).fill(0).map((_,i) => `<div class="candle" id="c${i+1}"><div class="flame" onclick="blowCandle(${i+1})"></div><div class="smoke"></div></div>`).join('');
        };

        // SYSTEM FUNCTIONS
        function bootSystem() {
            // Fullscreen attempt
            const elem = document.documentElement;
            if (elem.requestFullscreen) elem.requestFullscreen().catch(e=>{});
            else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();

            document.getElementById('boot-screen').style.display = 'none';
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('login-screen').classList.add('flex');
        }

        function checkLogin() {
            if(document.getElementById('login-pass').value.toLowerCase().trim() === "cece cantik") {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('desktop').classList.remove('hidden');
                document.getElementById('desktop').classList.add('block');
                
                // --- LOGIKA PEMBUKA OTOMATIS (HANYA MUSIK & KUE) ---
                setTimeout(() => openWindow('win-music'), 500); 
                setTimeout(() => openWindow('win-cake'), 1200);
                // TIDAK ADA openWindow('win-letter') DI SINI! AMAN.
                
                // Play Music
                const audio = document.getElementById('bg-music');
                audio.volume = 0.5;
                audio.play().catch(e => console.log("Audio autoplay blocked"));

                // Start Clock & Calc
                setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}), 1000);
                calculateAge();
                loadDiary();
            } else {
                document.getElementById('login-error').classList.remove('hidden');
                document.getElementById('login-pass').value = '';
            }
        }
        document.getElementById('login-pass').addEventListener('keypress', function (e) { if (e.key === 'Enter') checkLogin(); });

        // WINDOW MANAGER
        let zIndex = 100;
        function openWindow(id) { 
            const w = document.getElementById(id); 
            w.style.setProperty('display', 'flex', 'important'); // PAKSA MUNCUL
            w.classList.add('active'); 
            bringToFront(id);
        }
        function closeWindow(id) { 
            const w = document.getElementById(id); 
            w.style.setProperty('display', 'none', 'important'); // PAKSA HILANG
            w.classList.remove('active'); 
        }
        function bringToFront(id) { document.getElementById(id).style.zIndex = ++zIndex; }

        // DRAG LOGIC
        let isDragging = false, curWin = null, initX, initY;
        function dragStart(e, id) { 
            curWin = document.getElementById(id); 
            const rect = curWin.getBoundingClientRect();
            initX = e.clientX - rect.left; 
            initY = e.clientY - rect.top; 
            isDragging = true; 
            bringToFront(id);
        }
        document.addEventListener('mousemove', e => { 
            if(isDragging && curWin) { 
                e.preventDefault(); 
                curWin.style.left = (e.clientX - initX) + 'px'; 
                curWin.style.top = (e.clientY - initY) + 'px'; 
                curWin.style.transform='none'; 
            }
        });
        document.addEventListener('mouseup', () => { isDragging = false; curWin = null; });
        document.querySelectorAll('.win-header').forEach(h => h.style.cursor = 'move');

        // APP LOGICS
        function openPhoto(src, msg) { 
            document.getElementById('viewer-img').src = src; 
            document.getElementById('viewer-caption').innerText = msg; 
            openWindow('win-image-viewer'); 
        }
        function saveDiary() { localStorage.setItem('chelsea_diary', document.getElementById('diary-input').value); alert("Tersimpan aman di hati (dan browser)! â¤ï¸"); }
        function loadDiary() { if(localStorage.getItem('chelsea_diary')) document.getElementById('diary-input').value = localStorage.getItem('chelsea_diary'); }
        function blowCandleGeneric() { document.getElementById('wish-text').classList.remove('hidden'); confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } }); }
        
        function calculateAge() { 
            const diff = new Date() - new Date('2007-02-23'); 
            document.getElementById('age-calc').innerText = Math.floor(diff/31557600000) + " Years"; 
            document.getElementById('days-calc').innerText = Math.floor(diff/86400000) + " Days"; 
        }

        // CANDLE GAME
        const c_data = Array(5).fill().map((_,i)=>({id:i+1, r: Math.floor(Math.random()*3)+1, off:false}));
        function blowCandle(id) {
            if (id === 0) { blowCandleGeneric(); return; }
            const c = c_data[id-1]; if(c.off) return;
            const el = document.getElementById('c'+id);
            el.querySelector('.flame').classList.add('off'); el.querySelector('.smoke').classList.add('active');
            
            if(c.r > 0) {
                setTimeout(() => { 
                    el.querySelector('.flame').classList.remove('off'); 
                    el.querySelector('.smoke').classList.remove('active'); 
                    c.r--; 
                }, Math.random()*1500+500); // Random reignite time
            } else { 
                c.off=true; 
                if(c_data.every(x=>x.off)) { 
                    confetti(); 
                    document.getElementById('game-instruction').innerHTML="SELAMAT ULANG TAHUN SAYANG! â¤ï¸"; 
                    document.getElementById('reset-candle-btn').classList.remove('hidden'); 
                } 
            }
        }
        function resetCandles() {
            c_data.forEach(c => { c.r = Math.floor(Math.random()*3)+1; c.off=false; const el=document.getElementById('c'+c.id); el.querySelector('.flame').classList.remove('off'); el.querySelector('.smoke').classList.remove('active'); });
            document.getElementById('reset-candle-btn').classList.add('hidden'); document.getElementById('game-instruction').innerHTML = "Tiup/Klik api!";
        }
        function enableMic() {
            navigator.mediaDevices.getUserMedia({audio:true}).then(s => {
                const ctx = new (window.AudioContext||window.webkitAudioContext)(), analyser = ctx.createAnalyser(), mic = ctx.createMediaStreamSource(s), script = ctx.createScriptProcessor(2048,1,1);
                mic.connect(analyser); analyser.connect(script); script.connect(ctx.destination);
                script.onaudioprocess = () => {
                    const arr = new Uint8Array(analyser.frequencyBinCount); analyser.getByteFrequencyData(arr);
                    if((arr.reduce((a,b)=>a+b)/arr.length) > 30) { 
                        const lit = c_data.filter(c=>!c.off); 
                        if(lit.length) blowCandle(lit[Math.floor(Math.random()*lit.length)].id); 
                    }
                }; alert("Mic Aktif! Coba tiup ke layar ğŸŒ¬ï¸");
            }).catch(()=>alert("Mic tidak diizinkan browser. Klik manual aja ya!"));
        }
    </script>
</body>
</html>
